app:
  name: dns-manager
  version: 1.0.0
  environment: test

server:
  host: 0.0.0.0
  port: 8080
  read_timeout: 5s
  write_timeout: 10s
  idle_timeout: 120s
  tls:
    enabled: false
    port: 8443
    cert_file: /etc/letsencrypt/live/test.jerkytreats.dev/cert.pem
    key_file: /etc/letsencrypt/live/test.jerkytreats.dev/privkey.pem
    min_version: "1.2"
    max_version: "1.3"

dns:
  domain: test.jerkytreats.dev
  internal:
    enabled: true
    origin: "internal.test.jerkytreats.dev"
    bootstrap_devices:
      - name: "test-device-1"
        tailscale_name: "test-device"
        aliases: ["test-device", "device1"]
        description: "Test device 1"
        enabled: true
      - name: "api-server"
        tailscale_name: "api-server"
        aliases: ["api", "server"]
        description: "API server"
        enabled: true
  coredns:
    config_path: /etc/coredns/Corefile
    zones_path: /etc/coredns/zones
    reload_command: [] # Disabled for tests - CoreDNS will pick up file changes
    tls:
      enabled: false
      port: 853
      cert_file: /etc/letsencrypt/live/test.jerkytreats.dev/cert.pem
      key_file: /etc/letsencrypt/live/test.jerkytreats.dev/privkey.pem

logging:
  level: debug
  format: json
  output: stdout

certificate:
  provider: "lego"
  email: "admin@test.jerkytreats.dev"
  domain: "test.jerkytreats.dev"
  ca_dir_url: "https://pebble:14000/dir"
  # DNS resolvers for ACME challenge verification (use public DNS servers)
  dns_resolvers:
    - "8.8.8.8:53"
    - "1.1.1.1:53"
  dns_timeout: "10s"
  insecure_skip_verify: true  # Skip certificate verification for test environment
  renewal:
    enabled: false
    renew_before: "720h" # 30 days
    check_interval: "24h"
  monitoring:
    enabled: false
    alert_threshold: "168h" # 7 days

# Tailscale integration configuration for testing
tailscale:
  api_key: "test-api-key"
  tailnet: "test-tailnet"
  base_url: "http://mock-tailscale:80"  # Mock service URL
